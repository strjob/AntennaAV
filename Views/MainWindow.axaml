<Window
    x:Class="AntennaAV.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ScottPlot="clr-namespace:ScottPlot.Avalonia;assembly=ScottPlot.Avalonia"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:AntennaAV"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:treegrid="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.TreeDataGrid"
    xmlns:vm="using:AntennaAV.ViewModels"
    Title="AntennaAV"
    Width="1366"
    Height="720"
    d:DesignHeight="720"
    d:DesignWidth="1366"
    x:DataType="vm:MainWindowViewModel"
    Icon="/Assets/avalonia-logo.ico"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <Window.Resources>
        <local:HexToColorConverter x:Key="HexToColorConverter" />
    </Window.Resources>

    <Window.Resources>
        <StreamGeometry x:Key="save_as_regular">M5.75 3C4.23122 3 3 4.23122 3 5.75V18.25C3 19.7688 4.23122 21 5.75 21H9.99852C9.99129 20.8075 10.011 20.6088 10.0613 20.4075L10.2882 19.5H7.5V14.25C7.5 13.8358 7.83579 13.5 8.25 13.5H14.8531L16.2883 12.0648C16.1158 12.0225 15.9355 12 15.75 12H8.25C7.00736 12 6 13.0074 6 14.25V19.5H5.75C5.05964 19.5 4.5 18.9404 4.5 18.25V5.75C4.5 5.05964 5.05964 4.5 5.75 4.5H7V7.25C7 8.49264 8.00736 9.5 9.25 9.5H13.75C14.9926 9.5 16 8.49264 16 7.25V4.52344C16.3582 4.58269 16.6918 4.75246 16.9519 5.01256L18.9874 7.0481C19.3156 7.37629 19.5 7.8214 19.5 8.28553V10.007C19.5709 10.0024 19.642 10 19.713 10H19.7151C20.1521 10.0002 20.59 10.0874 21 10.2615V8.28553C21 7.42358 20.6576 6.59693 20.0481 5.98744L18.0126 3.9519C17.4031 3.34241 16.5764 3 15.7145 3H5.75ZM8.5 7.25V4.5H14.5V7.25C14.5 7.66421 14.1642 8 13.75 8H9.25C8.83579 8 8.5 7.66421 8.5 7.25Z M19.7152 11H19.7131C19.1285 11.0003 18.5439 11.2234 18.0979 11.6695L12.1955 17.5719C11.8513 17.916 11.6072 18.3472 11.4892 18.8194L11.0315 20.6501C10.8325 21.4462 11.5536 22.1674 12.3497 21.9683L14.1804 21.5106C14.6526 21.3926 15.0838 21.1485 15.4279 20.8043L21.3303 14.9019C22.223 14.0093 22.223 12.5621 21.3303 11.6695C20.8843 11.2234 20.2998 11.0003 19.7152 11Z</StreamGeometry>
        <StreamGeometry x:Key="delete_forever_regular">M19.5,16 C22.5375661,16 25,18.4624339 25,21.5 C25,24.5375661 22.5375661,27 19.5,27 C16.4624339,27 14,24.5375661 14,21.5 C14,18.4624339 16.4624339,16 19.5,16 Z M14,2.25 C16.0042592,2.25 17.6412737,3.82236105 17.744802,5.80084143 L17.75,6 L23.25,6 C23.6642136,6 24,6.33578644 24,6.75 C24,7.12969577 23.7178461,7.44349096 23.3517706,7.49315338 L23.25,7.5 L22.191,7.5 L21.5567191,15.3321126 C21.0850145,15.1748937 20.5892627,15.0702731 20.0764221,15.0252089 L20.6867279,7.5 L7.31327208,7.5 L8.52396146,22.4318357 C8.6186884,23.6001347 9.59446882,24.5 10.7666018,24.5 L13.7327703,24.5010736 C14.0200482,25.0520148 14.3839565,25.5566422 14.8103588,26.0008195 L10.7666018,26 C8.81304683,26 7.18674613,24.5002245 7.02886788,22.5530595 L5.808,7.5 L4.75,7.5 C4.37030423,7.5 4.05650904,7.21784612 4.00684662,6.85177056 L4,6.75 C4,6.37030423 4.28215388,6.05650904 4.64822944,6.00684662 L4.75,6 L10.25,6 C10.25,3.92893219 11.9289322,2.25 14,2.25 Z M17.0237993,19.0241379 C16.8285371,19.2194 16.8285371,19.5359825 17.0237993,19.7312446 L18.793,21.501 L17.0263884,23.2674911 C16.8311263,23.4627532 16.8311263,23.7793357 17.0263884,23.9745978 C17.2216505,24.16986 17.538233,24.16986 17.7334952,23.9745978 L19.5,22.208 L21.2693951,23.9768405 C21.4646573,24.1721026 21.7812398,24.1721026 21.9765019,23.9768405 C22.1717641,23.7815783 22.1717641,23.4649959 21.9765019,23.2697337 L20.208,21.501 L21.9792686,19.7312918 C22.1745308,19.5360297 22.1745308,19.2194472 21.9792686,19.024185 C21.7840065,18.8289229 21.467424,18.8289229 21.2721619,19.024185 L19.501,20.794 L17.7309061,19.0241379 C17.5356439,18.8288757 17.2190614,18.8288757 17.0237993,19.0241379 Z M14,3.75 C12.809136,3.75 11.8343551,4.67516159 11.7551908,5.84595119 L11.75,6 L16.25,6 L16.2448092,5.84595119 C16.1656449,4.67516159 15.190864,3.75 14,3.75 Z</StreamGeometry>
        <StreamGeometry x:Key="eye_show_regular">M12,9.0046246 C14.209139,9.0046246 16,10.7954856 16,13.0046246 C16,15.2137636 14.209139,17.0046246 12,17.0046246 C9.790861,17.0046246 8,15.2137636 8,13.0046246 C8,10.7954856 9.790861,9.0046246 12,9.0046246 Z M12,10.5046246 C10.6192881,10.5046246 9.5,11.6239127 9.5,13.0046246 C9.5,14.3853365 10.6192881,15.5046246 12,15.5046246 C13.3807119,15.5046246 14.5,14.3853365 14.5,13.0046246 C14.5,11.6239127 13.3807119,10.5046246 12,10.5046246 Z M12,5.5 C16.613512,5.5 20.5960869,8.65000641 21.7011157,13.0643865 C21.8017,13.4662019 21.557504,13.8734775 21.1556885,13.9740618 C20.7538731,14.0746462 20.3465976,13.8304502 20.2460132,13.4286347 C19.3071259,9.67795854 15.9213644,7 12,7 C8.07693257,7 4.69009765,9.68026417 3.75285786,13.4331499 C3.65249525,13.8350208 3.24535455,14.0794416 2.84348365,13.979079 C2.44161275,13.8787164 2.19719198,13.4715757 2.29755459,13.0697048 C3.4006459,8.65271806 7.38448293,5.5 12,5.5 Z</StreamGeometry>
        <StreamGeometry x:Key="eye_hide_regular">M2.21967 2.21967C1.9534 2.48594 1.9292 2.9026 2.14705 3.19621L2.21967 3.28033L6.25424 7.3149C4.33225 8.66437 2.89577 10.6799 2.29888 13.0644C2.1983 13.4662 2.4425 13.8735 2.84431 13.9741C3.24613 14.0746 3.6534 13.8305 3.75399 13.4286C4.28346 11.3135 5.59112 9.53947 7.33416 8.39452L9.14379 10.2043C8.43628 10.9258 8 11.9143 8 13.0046C8 15.2138 9.79086 17.0046 12 17.0046C13.0904 17.0046 14.0788 16.5683 14.8004 15.8608L20.7197 21.7803C21.0126 22.0732 21.4874 22.0732 21.7803 21.7803C22.0466 21.5141 22.0708 21.0974 21.8529 20.8038L21.7803 20.7197L15.6668 14.6055L15.668 14.604L14.4679 13.4061L11.598 10.5368L11.6 10.536L8.71877 7.65782L8.72 7.656L7.58672 6.52549L3.28033 2.21967C2.98744 1.92678 2.51256 1.92678 2.21967 2.21967ZM10.2041 11.2655L13.7392 14.8006C13.2892 15.2364 12.6759 15.5046 12 15.5046C10.6193 15.5046 9.5 14.3853 9.5 13.0046C9.5 12.3287 9.76824 11.7154 10.2041 11.2655ZM12 5.5C10.9997 5.5 10.0291 5.64807 9.11109 5.925L10.3481 7.16119C10.8839 7.05532 11.4364 7 12 7C15.9231 7 19.3099 9.68026 20.2471 13.4332C20.3475 13.835 20.7546 14.0794 21.1565 13.9791C21.5584 13.8787 21.8028 13.4716 21.7024 13.0697C20.5994 8.65272 16.6155 5.5 12 5.5Z</StreamGeometry>
        <StreamGeometry x:Key="upload_regular">M5.25021713,20.5 L18.2502171,20.5037635 C18.6644307,20.5038835 19,20.8397671 19,21.2539806 C19,21.6336764 18.7176637,21.9473899 18.3515577,21.9969463 L18.2497829,22.0037635 L5.24978287,22 C4.83556933,21.9998801 4.5,21.6639964 4.5,21.2497829 C4.5,20.8700871 4.78233634,20.5563736 5.1484423,20.5068172 L5.25021713,20.5 Z M6.21972471,7.21846694 L11.21737,2.22185426 C11.4835159,1.95576328 11.8999028,1.93145946 12.1934928,2.14902198 L12.2776129,2.2215468 L17.2810585,7.21815948 C17.5741518,7.5108525 17.5744763,7.98572612 17.2817833,8.2788194 C17.0156987,8.54526784 16.5990517,8.56975859 16.3052914,8.35210481 L16.2211234,8.27954415 L12.5,4.56423913 L12.5,18.2488622 C12.5,18.6285579 12.2178461,18.9423531 11.8517706,18.9920156 L11.75,18.9988622 C11.3703042,18.9988622 11.056509,18.7167083 11.0068466,18.3506327 L11,18.2488622 L11,4.55923913 L7.28027529,8.27923669 C7.01398122,8.54547574 6.59731504,8.56963874 6.30372605,8.35175395 L6.21961512,8.27912711 C5.95337607,8.01283303 5.92921307,7.59616685 6.14709787,7.30257787 L6.21972471,7.21846694 L11.21737,2.22185426 L6.21972471,7.21846694 Z</StreamGeometry>
        <StreamGeometry x:Key="paint_brush_arrow_down_regular">M8.35607 17.0075C8.76612 17.0661 9.05105 17.446 8.99247 17.8561C8.85756 18.8004 8.5899 19.6665 8.36001 20.2905C8.2444 20.6043 8.13672 20.8612 8.05711 21.0414C8.01726 21.1316 7.98434 21.2028 7.96082 21.2526C7.94906 21.2774 7.93964 21.297 7.93287 21.3109L7.92474 21.3275L7.92224 21.3326L7.92139 21.3343L7.92094 21.3352C7.92094 21.3352 7.92082 21.3354 7.25 21L7.92094 21.3352C7.7357 21.7057 7.28507 21.8561 6.91459 21.6708C6.54432 21.4857 6.39411 21.0356 6.57885 20.6652L6.57957 20.6638L6.5841 20.6545C6.58844 20.6456 6.59537 20.6312 6.60461 20.6117C6.62308 20.5726 6.6507 20.513 6.68508 20.4352C6.75391 20.2794 6.84935 20.0519 6.95249 19.772C7.1601 19.2085 7.39245 18.4496 7.50754 17.6439C7.56612 17.2339 7.94602 16.949 8.35607 17.0075Z M10.9127 18.0179C11.317 18.1077 11.572 18.5083 11.4821 18.9127L10.9821 21.1627C10.8923 21.567 10.4917 21.822 10.0873 21.7321C9.68295 21.6423 9.428 21.2417 9.51786 20.8373L10.0179 18.5873C10.1077 18.183 10.5083 17.928 10.9127 18.0179Z M18 13H6V11.5H18V13Z M12 2C10.6193 2 9.5 3.11929 9.5 4.5V7.5H7.11173C5.93802 7.5 5.03485 8.49324 5.07218 9.63137C5.11456 10.9233 5.11662 12.9871 4.85477 15.1143C4.59044 17.2617 4.06766 19.3785 3.12032 20.8426C2.97106 21.0732 2.95988 21.3671 3.09118 21.6084C3.22249 21.8498 3.47525 22 3.75 22H15.5251L14.5126 20.9874C14.3667 20.8416 14.2519 20.6763 14.1683 20.5H5.00972C5.73187 18.9257 6.12717 17.0553 6.34353 15.2976C6.61845 13.0642 6.61511 10.9156 6.57137 9.58219C6.56068 9.25616 6.82048 9 7.11173 9H10.25C10.6642 9 11 8.66421 11 8.25V4.5C11 3.94772 11.4477 3.5 12 3.5C12.5523 3.5 13 3.94772 13 4.5V8.25C13 8.66421 13.3358 9 13.75 9H16.75C17.1642 9 17.5 9.33579 17.5 9.75V14.193C17.7397 14.0697 18.0116 14 18.2998 14C18.5488 14 18.7856 14.052 19 14.1457V9.75C19 8.50736 17.9926 7.5 16.75 7.5H14.5V4.5C14.5 3.11929 13.3807 2 12 2Z M16.2803 19.2197C15.9874 18.9268 15.5126 18.9268 15.2197 19.2197C14.9268 19.5126 14.9268 19.9874 15.2197 20.2803L17.7197 22.7803C17.8603 22.921 18.0511 23 18.25 23C18.4489 23 18.6397 22.921 18.7803 22.7803L21.2803 20.2803C21.5732 19.9874 21.5732 19.5126 21.2803 19.2197C20.9874 18.9268 20.5125 18.9268 20.2197 19.2197L19.0498 20.3895V15.75C19.0498 15.3358 18.714 15 18.2998 15C17.8856 15 17.5498 15.3358 17.5498 15.75V20.4892L16.2803 19.2197Z</StreamGeometry>
        <StreamGeometry x:Key="arrow_right_regular">M15.2685,4.20949 C14.97,3.92233 14.4952,3.93153 14.208,4.23005 C13.9209,4.52857 13.9301,5.00335 14.2286,5.29051 L22.5028,13.25 L3.75,13.25 C3.33579,13.25 3,13.5858 3,13.9999982 C3,14.4142 3.33579,14.75 3.75,14.75 L22.5018,14.75 L14.2286,22.7085 C13.9301,22.9957 13.9209,23.4705 14.208,23.769 C14.4952,24.0675 14.97,24.0767 15.2685,23.7896 L24.6965,14.7202 C25.1054,14.3268 25.1054,13.6723 24.6965,13.2788 L15.2685,4.20949 Z</StreamGeometry>
        <StreamGeometry x:Key="arrow_download_regular">M12.25,39.5 L35.75,39.5 C36.4403559,39.5 37,40.0596441 37,40.75 C37,41.3972087 36.5081253,41.9295339 35.8778052,41.9935464 L35.75,42 L12.25,42 C11.5596441,42 11,41.4403559 11,40.75 C11,40.1027913 11.4918747,39.5704661 12.1221948,39.5064536 L12.25,39.5 L35.75,39.5 L12.25,39.5 Z M23.6221948,6.00645361 L23.75,6 C24.3972087,6 24.9295339,6.49187466 24.9935464,7.12219476 L25,7.25 L25,31.54 L30.6466793,25.8942911 C31.1348346,25.4061358 31.9262909,25.4061358 32.4144462,25.8942911 C32.9026016,26.3824465 32.9026016,27.1739027 32.4144462,27.6620581 L24.6362716,35.4402327 C24.1481163,35.928388 23.35666,35.928388 22.8685047,35.4402327 L15.0903301,27.6620581 C14.6021747,27.1739027 14.6021747,26.3824465 15.0903301,25.8942911 C15.5784855,25.4061358 16.3699417,25.4061358 16.858097,25.8942911 L22.5,31.536 L22.5,7.25 C22.5,6.60279131 22.9918747,6.0704661 23.6221948,6.00645361 L23.75,6 L23.6221948,6.00645361 Z</StreamGeometry>
        <StreamGeometry x:Key="stop_regular">M19.25 4.5C19.3881 4.5 19.5 4.61193 19.5 4.75V19.25C19.5 19.3881 19.3881 19.5 19.25 19.5H4.75C4.61193 19.5 4.5 19.3881 4.5 19.25V4.75C4.5 4.61193 4.61193 4.5 4.75 4.5H19.25ZM4.75 3C3.7835 3 3 3.7835 3 4.75V19.25C3 20.2165 3.7835 21 4.75 21H19.25C20.2165 21 21 20.2165 21 19.25V4.75C21 3.7835 20.2165 3 19.25 3H4.75Z</StreamGeometry>
        <StreamGeometry x:Key="settings_regular">M14 9.50006C11.5147 9.50006 9.5 11.5148 9.5 14.0001C9.5 16.4853 11.5147 18.5001 14 18.5001C15.3488 18.5001 16.559 17.9066 17.3838 16.9666C18.0787 16.1746 18.5 15.1365 18.5 14.0001C18.5 13.5401 18.431 13.0963 18.3028 12.6784C17.7382 10.8381 16.0253 9.50006 14 9.50006ZM11 14.0001C11 12.3432 12.3431 11.0001 14 11.0001C15.6569 11.0001 17 12.3432 17 14.0001C17 15.6569 15.6569 17.0001 14 17.0001C12.3431 17.0001 11 15.6569 11 14.0001Z M21.7093 22.3948L19.9818 21.6364C19.4876 21.4197 18.9071 21.4515 18.44 21.7219C17.9729 21.9924 17.675 22.4693 17.6157 23.0066L17.408 24.8855C17.3651 25.273 17.084 25.5917 16.7055 25.682C14.9263 26.1061 13.0725 26.1061 11.2933 25.682C10.9148 25.5917 10.6336 25.273 10.5908 24.8855L10.3834 23.0093C10.3225 22.4731 10.0112 21.9976 9.54452 21.7281C9.07783 21.4586 8.51117 21.4269 8.01859 21.6424L6.29071 22.4009C5.93281 22.558 5.51493 22.4718 5.24806 22.1859C4.00474 20.8536 3.07924 19.2561 2.54122 17.5137C2.42533 17.1384 2.55922 16.7307 2.8749 16.4977L4.40219 15.3703C4.83721 15.0501 5.09414 14.5415 5.09414 14.0007C5.09414 13.4598 4.83721 12.9512 4.40162 12.6306L2.87529 11.5051C2.55914 11.272 2.42513 10.8638 2.54142 10.4882C3.08038 8.74734 4.00637 7.15163 5.24971 5.82114C5.51684 5.53528 5.93492 5.44941 6.29276 5.60691L8.01296 6.36404C8.50793 6.58168 9.07696 6.54881 9.54617 6.27415C10.0133 6.00264 10.3244 5.52527 10.3844 4.98794L10.5933 3.11017C10.637 2.71803 10.9245 2.39704 11.3089 2.31138C12.19 2.11504 13.0891 2.01071 14.0131 2.00006C14.9147 2.01047 15.8128 2.11485 16.6928 2.31149C17.077 2.39734 17.3643 2.71823 17.4079 3.11017L17.617 4.98937C17.7116 5.85221 18.4387 6.50572 19.3055 6.50663C19.5385 6.507 19.769 6.45838 19.9843 6.36294L21.7048 5.60568C22.0626 5.44818 22.4807 5.53405 22.7478 5.81991C23.9912 7.1504 24.9172 8.74611 25.4561 10.487C25.5723 10.8623 25.4386 11.2703 25.1228 11.5035L23.5978 12.6297C23.1628 12.95 22.9 13.4586 22.9 13.9994C22.9 14.5403 23.1628 15.0489 23.5988 15.3698L25.1251 16.4965C25.441 16.7296 25.5748 17.1376 25.4586 17.5131C24.9198 19.2536 23.9944 20.8492 22.7517 22.1799C22.4849 22.4657 22.0671 22.5518 21.7093 22.3948ZM16.263 22.1966C16.4982 21.4685 16.9889 20.8288 17.6884 20.4238C18.5702 19.9132 19.6536 19.8547 20.5841 20.2627L21.9281 20.8526C22.791 19.8538 23.4593 18.7013 23.8981 17.4552L22.7095 16.5778L22.7086 16.5771C21.898 15.98 21.4 15.0277 21.4 13.9994C21.4 12.9719 21.8974 12.0195 22.7073 11.4227L22.7085 11.4218L23.8957 10.545C23.4567 9.2988 22.7881 8.14636 21.9248 7.1477L20.5922 7.73425L20.5899 7.73527C20.1844 7.91463 19.7472 8.00722 19.3039 8.00663C17.6715 8.00453 16.3046 6.77431 16.1261 5.15465L16.1259 5.15291L15.9635 3.69304C15.3202 3.57328 14.6677 3.50872 14.013 3.50017C13.3389 3.50891 12.6821 3.57367 12.0377 3.69328L11.8751 5.15452C11.7625 6.16272 11.1793 7.05909 10.3019 7.56986C9.41937 8.0856 8.34453 8.14844 7.40869 7.73694L6.07273 7.14893C5.20949 8.14751 4.54092 9.29983 4.10196 10.5459L5.29181 11.4233C6.11115 12.0269 6.59414 12.9837 6.59414 14.0007C6.59414 15.0173 6.11142 15.9742 5.29237 16.5776L4.10161 17.4566C4.54002 18.7044 5.2085 19.8585 6.07205 20.8587L7.41742 20.2682C8.34745 19.8613 9.41573 19.9215 10.2947 20.4292C11.174 20.937 11.7593 21.832 11.8738 22.84L11.8744 22.8445L12.0362 24.3088C13.3326 24.5638 14.6662 24.5638 15.9626 24.3088L16.1247 22.8418C16.1491 22.6217 16.1955 22.4055 16.263 22.1966Z</StreamGeometry>
        <StreamGeometry x:Key="document_autosave_regular">M6.5,12 C9.53756612,12 12,14.4624339 12,17.5 C12,20.5375661 9.53756612,23 6.5,23 C3.46243388,23 1,20.5375661 1,17.5 C1,14.4624339 3.46243388,12 6.5,12 Z M12.1289096,2 C12.7254427,2 13.2975605,2.23689125 13.7194834,2.6585934 L16.531355,5.46899352 L19.3390003,8.28086677 C19.7602248,8.70272584 19.996813,9.2745088 19.996813,9.8706591 L19.996813,19.75 C19.996813,20.9926407 18.9894537,22 17.746813,22 L11.1896412,22.0008195 C11.6160435,21.5566422 11.9799518,21.0520148 12.2672297,20.5010736 L17.746813,20.5 C18.1610266,20.5 18.496813,20.1642136 18.496813,19.75 L18.496,10.003 L14.25,10.0038905 C13.059136,10.0038905 12.0843551,9.07872894 12.0051908,7.90793935 L12,7.75389054 L11.999,3.5 L6.25,3.5 C5.83578644,3.5 5.5,3.83578644 5.5,4.25 L5.49909108,11.0765886 C4.97586224,11.157457 4.47324006,11.3007258 3.99906694,11.4985525 L4,4.25 C4,3.00735931 5.00735931,2 6.25,2 L12.1289096,2 Z M9.5,17.5 L7.5,17.5 L7.41012437,17.5080557 C7.17687516,17.5503916 7,17.7545401 7,18 C7,18.2454599 7.17687516,18.4496084 7.41012437,18.4919443 L7.5,18.5 L8.37050377,18.5006122 C8.01032916,19.1741569 7.29973837,19.6235886 6.49648802,19.6235886 C5.88270332,19.6235886 5.31221362,19.3624278 4.91135565,18.9131866 C4.85559244,18.8506928 4.80355063,18.7849808 4.75553163,18.7164124 C4.59712759,18.4902205 4.28535099,18.4352676 4.0591591,18.5936717 C3.8329672,18.7520757 3.77801428,19.0638523 3.93641832,19.2900442 C4.00694884,19.3907577 4.08335839,19.4872383 4.16521157,19.5789711 C4.75385665,20.2386651 5.59469827,20.6235886 6.49648802,20.6235886 C7.44467256,20.6235886 8.30481161,20.1981198 8.88142795,19.5177367 L9.00057773,19.3681007 L9,20 L9.00805567,20.0898756 C9.05039163,20.3231248 9.25454011,20.5 9.5,20.5 C9.74545989,20.5 9.94960837,20.3231248 9.99194433,20.0898756 L10,20 L10,18 L9.99194433,17.9101244 C9.94960837,17.6768752 9.74545989,17.5 9.5,17.5 Z M6.49648802,14.3764114 C5.55080006,14.3764114 4.69274709,14.7996324 4.11618094,15.4768116 L3.99701016,15.6257468 L3.99871227,15 L3.9906566,14.9101244 C3.94832064,14.6768752 3.74417215,14.5 3.49871227,14.5 C3.25325238,14.5 3.04910389,14.6768752 3.00676793,14.9101244 L2.99871227,15 L2.99871227,17 L3.00676793,17.0898756 C3.0438119,17.2939687 3.20474358,17.4549004 3.40883663,17.4919443 L3.49871227,17.5 L5.5,17.5 L5.58987563,17.4919443 C5.82312484,17.4496084 6,17.2454599 6,17 C6,16.7545401 5.82312484,16.5503916 5.58987563,16.5080557 L5.5,16.5 L4.62227181,16.4997633 C4.98236805,15.8260447 5.69304839,15.3764114 6.49648802,15.3764114 C7.10851954,15.3764114 7.67752678,15.6360683 8.07827816,16.0830766 C8.13699297,16.1485686 8.19161005,16.2176171 8.24178059,16.2898029 C8.39937897,16.5165568 8.71095812,16.5726185 8.93771208,16.4150201 C9.16446604,16.2574217 9.22052772,15.9458426 9.06292933,15.7190886 C8.98923636,15.6130585 8.90904519,15.5116785 8.82285974,15.4155451 C8.23436623,14.7591245 7.39569596,14.3764114 6.49648802,14.3764114 Z M13.499,4.559 L13.5,7.75389054 C13.5,8.1335863 13.7821539,8.4473815 14.1482294,8.49704392 L14.25,8.50389054 L17.441,8.503 L13.499,4.559 Z</StreamGeometry>
        <StreamGeometry x:Key="save_regular">M3 5.75C3 4.23122 4.23122 3 5.75 3H15.7145C16.5764 3 17.4031 3.34241 18.0126 3.9519L20.0481 5.98744C20.6576 6.59693 21 7.42358 21 8.28553V18.25C21 19.7688 19.7688 21 18.25 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM5.75 4.5C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H6V14.25C6 13.0074 7.00736 12 8.25 12H15.75C16.9926 12 18 13.0074 18 14.25V19.5H18.25C18.9404 19.5 19.5 18.9404 19.5 18.25V8.28553C19.5 7.8214 19.3156 7.37629 18.9874 7.0481L16.9519 5.01256C16.6918 4.75246 16.3582 4.58269 16 4.52344V7.25C16 8.49264 14.9926 9.5 13.75 9.5H9.25C8.00736 9.5 7 8.49264 7 7.25V4.5H5.75ZM16.5 19.5V14.25C16.5 13.8358 16.1642 13.5 15.75 13.5H8.25C7.83579 13.5 7.5 13.8358 7.5 14.25V19.5H16.5ZM8.5 4.5V7.25C8.5 7.66421 8.83579 8 9.25 8H13.75C14.1642 8 14.5 7.66421 14.5 7.25V4.5H8.5Z</StreamGeometry>


        <StreamGeometry x:Key="add_square_regular">M12 7C12.4142 7 12.75 7.33579 12.75 7.75V11.25H16.25C16.6642 11.25 17 11.5858 17 12C17 12.4142 16.6642 12.75 16.25 12.75H12.75V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V12.75H7.75C7.33579 12.75 7 12.4142 7 12C7 11.5858 7.33579 11.25 7.75 11.25H11.25V7.75C11.25 7.33579 11.5858 7 12 7Z M3 6.25C3 4.45507 4.45507 3 6.25 3H17.75C19.5449 3 21 4.45507 21 6.25V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V6.25ZM6.25 4.5C5.2835 4.5 4.5 5.2835 4.5 6.25V17.75C4.5 18.7165 5.2835 19.5 6.25 19.5H17.75C18.7165 19.5 19.5 18.7165 19.5 17.75V6.25C19.5 5.2835 18.7165 4.5 17.75 4.5H6.25Z</StreamGeometry>
        <StreamGeometry x:Key="folder_open_regular">M20 9.50195V8.74985C20 7.50721 18.9926 6.49985 17.75 6.49985H12.0247L9.64368 4.51995C9.23959 4.18393 8.73063 3.99997 8.20509 3.99997H4.24957C3.00724 3.99997 2 5.00686 1.99957 6.24919L1.99561 17.7492C1.99518 18.9921 3.00266 20 4.24561 20H4.27196C4.27607 20 4.28019 20 4.28431 20H18.4693C19.2723 20 19.9723 19.4535 20.167 18.6745L21.9169 11.6765C22.1931 10.5719 21.3577 9.50195 20.2192 9.50195H20ZM4.24957 5.49997H8.20509C8.38027 5.49997 8.54993 5.56129 8.68462 5.6733L11.2741 7.82652C11.4088 7.93852 11.5784 7.99985 11.7536 7.99985H17.75C18.1642 7.99985 18.5 8.33563 18.5 8.74985V9.50195H6.42385C5.39136 9.50195 4.49137 10.2047 4.241 11.2064L3.49684 14.1837L3.49957 6.24971C3.49971 5.8356 3.83546 5.49997 4.24957 5.49997ZM5.69623 11.5701C5.77969 11.2362 6.07969 11.002 6.42385 11.002H20.2192C20.3819 11.002 20.5012 11.1548 20.4617 11.3126L18.7119 18.3107C18.684 18.4219 18.584 18.5 18.4693 18.5H4.28431C4.12167 18.5 4.00233 18.3472 4.04177 18.1894L5.69623 11.5701Z</StreamGeometry>

    </Window.Resources>

    <Design.DataContext>
        <!--
            This only sets the DataContext for the previewer in an IDE,
            to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs)
        -->
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="0.2*"
                MinWidth="250"
                MaxWidth="280" />
            <ColumnDefinition Width="0.62*" MinWidth="300" />
            <ColumnDefinition Width="0.38*" MinWidth="200" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ScottPlot:AvaPlot
            x:Name="AvaPlotMain"
            Grid.Row="0"
            Grid.Column="1"
            Margin="0,0,0,0" />


        <TextBlock
            Grid.Row="0"
            Grid.Column="1"
            Margin="5"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            FontSize="14"
            Text="{CompiledBinding DataFlowStatus}" />

        <!--<ToggleSwitch
            Grid.Row="0"
            Grid.Column="1"
            Margin="0,10,10,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Content="Реальное время"
            IsChecked="{CompiledBinding IsRealtimeMode,
                                        Mode=TwoWay}"
            IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}"
            OffContent="Выкл"
            OnContent="Вкл"
            ZIndex="2" />-->

        <Button
            x:Name="SavePngButton"
            Grid.Row="0"
            Grid.Column="1"
            Margin="10"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Click="SavePngButton_Click"
            IsEnabled="{CompiledBinding CanUseWhenHasTabs}"
            ToolTip.Tip="Сохранить график PNG"
            ZIndex="2">
            <PathIcon Data="{StaticResource save_regular}" />
        </Button>

        <StackPanel
            Grid.Row="0"
            Grid.Column="1"
            Margin="10,10,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Orientation="Vertical"
            ZIndex="2">
            <TextBlock
                Margin="0,0,10,0"
                VerticalAlignment="Center"
                Text="Тип графика:" />
            <RadioButton
                Margin="0,0,10,0"
                Content="дБ"
                GroupName="GraphType"
                IsChecked="{CompiledBinding IsPowerNormSelected,
                                            Mode=TwoWay}"
                IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}" />
            <RadioButton
                Content="Линейный"
                GroupName="GraphType"
                IsChecked="{x:Null}"
                IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}" />
        </StackPanel>

        <Grid
            Grid.Row="0"
            Grid.Column="0"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            ShowGridLines="True">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.2*" MinHeight="160" />
                <RowDefinition
                    Height="0.15*"
                    MinHeight="120"
                    MaxHeight="140" />
                <RowDefinition Height="100" />
                <RowDefinition Height="0.2*" MinHeight="160" />
                <RowDefinition
                    Height="0.2*"
                    MinHeight="120"
                    MaxHeight="140" />
                <RowDefinition Height="20" MinHeight="20" />
            </Grid.RowDefinitions>

            <!--  Верхний ряд - Передающая антенна  -->

            <ScottPlot:AvaPlot
                x:Name="AvaPlotTx"
                Grid.Row="0"
                MinHeight="150"
                Margin="10"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch" />
            <TextBlock
                Grid.Row="0"
                Margin="1"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="24"
                Text="{CompiledBinding TransmitterAngleDegStr}" />
            <TextBlock
                Grid.Row="0"
                Margin="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                FontSize="12"
                Foreground="Red"
                Text="{CompiledBinding TxAntennaCounterErrorStr}" />
            <TextBlock
                Grid.Row="0"
                Margin="0,5,0,10"
                HorizontalAlignment="Center"
                FontSize="16"
                Text="Передающая антенна" />

            <StackPanel
                Grid.Row="1"
                Margin="10"
                HorizontalAlignment="Center"
                VerticalAlignment="Top">
                <StackPanel Margin="0,0,0,5" Orientation="Horizontal">
                    <TextBlock
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="Угол:" />

                    <TextBlock
                        Margin="5,0,0,0"
                        VerticalAlignment="Bottom"
                        FontSize="12"
                        Foreground="Red"
                        Text="{CompiledBinding TransmitterAngleError}" />
                </StackPanel>

                <StackPanel
                    Margin="0,0,0,5"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <NumericUpDown
                        Width="125"
                        Margin="5,0,5,0"
                        VerticalAlignment="Center"
                        FormatString="0.0"
                        Increment="1"
                        KeyDown="NumericUpDown_KeyDown"
                        Maximum="359"
                        Minimum="0"
                        Watermark="0-359"
                        Value="{CompiledBinding TransmitterAngle,
                                                Mode=TwoWay,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveTransmitterToAngleCommand}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить">
                        <PathIcon Data="{StaticResource arrow_right_regular}" />
                    </Button>
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding SetTransmitterAngleCommand}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Задать угол (без перемещения)">
                        <PathIcon Data="{StaticResource arrow_download_regular}" />
                    </Button>
                </StackPanel>
                <StackPanel
                    Margin="2,0,0,5"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveTxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MoveMinus1}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на -1°">
                        <Svg Path="{CompiledBinding ChevronsLeftIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveTxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MoveMinus01}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на -0.1°">
                        <Svg Path="{CompiledBinding ChevronLeftIconPath}" />

                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveTxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MovePlus01}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на +0.1°">
                        <Svg Path="{CompiledBinding ChevronRightIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveTxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MovePlus1}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на +1°">
                        <Svg Path="{CompiledBinding ChevronsRightIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding StopAntennaCommand}"
                        CommandParameter="T"
                        Content="Стоп"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}">
                        <Button.Styles>
                            <Style>
                                <Style.Resources>
                                    <SolidColorBrush x:Key="ThemeBorderMidBrush">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ThemeControlHighBrush">DarkRed</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBorderBrush">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackground">OrangeRed</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackgroundPointerOver">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackgroundPressed">OrangeRed</SolidColorBrush>
                                </Style.Resources>
                            </Style>
                        </Button.Styles>
                        <!--<PathIcon Data="{StaticResource stop_regular}" />-->
                    </Button>
                </StackPanel>
            </StackPanel>


            <!--  Средний ряд - Существующие текстовые блоки  -->
            <StackPanel
                Grid.Row="2"
                Margin="5"
                VerticalAlignment="Top">
                <!--<TextBlock Text="Receiver Angle:" />
                <TextBlock Margin="1" Text="{CompiledBinding ReceiverAngleDegStr}" />

                <TextBlock Text="Transmitter Angle:" />
                <TextBlock Margin="1" Text="{CompiledBinding TransmitterAngleDegStr}" />-->
                <StackPanel
                    Grid.Row="2"
                    Margin="2"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">

                    <TextBlock FontSize="16" Text="Режим: " />
                    <TextBlock
                        Margin="1"
                        FontSize="16"
                        Text="{CompiledBinding AntennaTypeStr}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Margin="2"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <TextBlock FontSize="16" Text="Мощность, дБм: " />
                    <TextBlock
                        Margin="1"
                        FontSize="16"
                        Text="{CompiledBinding PowerDbmStr}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    Margin="2"
                    VerticalAlignment="Top"
                    Orientation="Horizontal">
                    <TextBlock FontSize="16" Text="Напряжение, мкВ: " />
                    <TextBlock
                        Margin="1"
                        FontSize="16"
                        Text="{CompiledBinding PowerDbmStr}" />
                </StackPanel>

                <!--<TextBlock Text="Tx Antenna Counter:" />
                <TextBlock Margin="1" Text="{CompiledBinding TxAntennaCounterStr}" />-->


            </StackPanel>

            <!--  Нижний ряд - Приемная антенна  -->
            <ScottPlot:AvaPlot
                x:Name="AvaPlotRx"
                Grid.Row="3"
                MinHeight="150"
                Margin="10"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch" />
            <TextBlock
                Grid.Row="3"
                Margin="1"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="24"
                Text="{CompiledBinding ReceiverAngleDegStr}" />
            <TextBlock
                Grid.Row="3"
                Margin="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                FontSize="12"
                Foreground="Red"
                Text="{CompiledBinding RxAntennaCounterErrorStr}" />
            <TextBlock
                Grid.Row="3"
                Margin="0,5,0,10"
                HorizontalAlignment="Center"
                FontSize="16"
                Text="Приемная антенна" />

            <StackPanel
                Grid.Row="4"
                Margin="10"
                HorizontalAlignment="Center"
                VerticalAlignment="Top">
                <StackPanel Margin="0,0,0,5" Orientation="Horizontal">
                    <TextBlock
                        Margin="10,0,0,0"
                        VerticalAlignment="Center"
                        Text="Угол:" />

                    <TextBlock
                        Margin="5,0,0,0"
                        VerticalAlignment="Bottom"
                        FontSize="12"
                        Foreground="Red"
                        Text="{CompiledBinding ReceiverAngleError}" />

                </StackPanel>

                <StackPanel
                    Margin="0,0,0,5"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <NumericUpDown
                        Width="125"
                        Margin="5,0,5,0"
                        VerticalAlignment="Center"
                        FormatString="0.0"
                        Increment="1"
                        KeyDown="NumericUpDown_KeyDown"
                        Maximum="359"
                        Minimum="0"
                        Watermark="0-359"
                        Value="{CompiledBinding ReceiverAngle,
                                                Mode=TwoWay,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveReceiverToAngleCommand}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить">
                        <PathIcon Data="{StaticResource arrow_right_regular}" />
                    </Button>
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding SetReceiverAngleCommand}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Задать угол (без перемещения)">
                        <PathIcon Data="{StaticResource arrow_download_regular}" />
                    </Button>
                </StackPanel>
                <StackPanel
                    Margin="2,0,0,5"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <Button
                        Margin="2"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveRxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MoveMinus1}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на -1°">
                        <Svg Path="{CompiledBinding ChevronsLeftIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveRxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MoveMinus01}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на -0.1°">
                        <Svg Path="{CompiledBinding ChevronLeftIconPath}" />

                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveRxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MovePlus01}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на +0.1°">
                        <Svg Path="{CompiledBinding ChevronRightIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding MoveRxAntennaToRelativeAngleCommand}"
                        CommandParameter="{CompiledBinding MovePlus1}"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                        ToolTip.Tip="Переместить на +1°">
                        <Svg Path="{CompiledBinding ChevronsRightIconPath}" />
                    </Button>
                    <Button
                        Margin="1"
                        HorizontalAlignment="Left"
                        Command="{CompiledBinding StopAntennaCommand}"
                        CommandParameter="R"
                        Content="Стоп"
                        IsEnabled="{CompiledBinding CanUseWhenPortOpen}">
                        <Button.Styles>
                            <Style>
                                <Style.Resources>
                                    <SolidColorBrush x:Key="ThemeBorderMidBrush">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ThemeControlHighBrush">DarkRed</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBorderBrush">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackground">OrangeRed</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackgroundPointerOver">Red</SolidColorBrush>
                                    <SolidColorBrush x:Key="ButtonBackgroundPressed">OrangeRed</SolidColorBrush>
                                </Style.Resources>
                            </Style>
                        </Button.Styles>
                        <!--<PathIcon Data="{StaticResource stop_regular}" />-->
                    </Button>
                </StackPanel>
            </StackPanel>
            <TextBlock
                Grid.Row="5"
                Margin="5"
                VerticalAlignment="Bottom"
                FontSize="14"
                Text="{CompiledBinding ConnectionStatus}" />
        </Grid>

        <Grid
            Grid.Row="0"
            Grid.Column="2"
            Margin="5"
            ShowGridLines="False">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="200" />
            </Grid.RowDefinitions>





            <StackPanel
                Grid.Row="0"
                Margin="0,0,0,8"
                HorizontalAlignment="Left"
                Orientation="Horizontal">
                <Button
                    Margin="5"
                    Command="{CompiledBinding AddTabCommand}"
                    IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                    ToolTip.Tip="Добавить таблицу">
                    <PathIcon Data="{StaticResource add_square_regular}" />
                </Button>

                <Button
                    Margin="5"
                    Command="{CompiledBinding RemoveTabCommand}"
                    IsEnabled="{CompiledBinding CanRemoveTabWhenPortOpen}"
                    ToolTip.Tip="Удалить таблицу">
                    <PathIcon Data="{StaticResource delete_forever_regular}" />
                </Button>
                <Button
                    Margin="5"
                    Command="{CompiledBinding ClearTableCommand}"
                    IsEnabled="{CompiledBinding CanUseWhenPortOpen}"
                    ToolTip.Tip="Очистить таблицу">
                    <PathIcon Data="{StaticResource paint_brush_arrow_down_regular}" />
                </Button>
                <Button
                    x:Name="ImportButton"
                    Margin="5"
                    Click="ImportButton_Click"
                    IsEnabled="{CompiledBinding CanUseWhenHasTabs}"
                    ToolTip.Tip="Загрузить из файла">
                    <PathIcon Data="{StaticResource folder_open_regular}" />
                </Button>
                <Button
                    x:Name="ExportButton"
                    Margin="5"
                    Click="ExportButton_Click"
                    IsEnabled="{CompiledBinding CanUseWhenHasTabs}"
                    ToolTip.Tip="Сохранить в файл">
                    <PathIcon Data="{StaticResource save_as_regular}" />
                </Button>

                <Button
                    x:Name="TogglePlotVisibilityButton"
                    Margin="5"
                    Click="TogglePlotVisibility_Click"
                    IsEnabled="{CompiledBinding CanUseWhenHasTabs}"
                    ToolTip.Tip="Показать/скрыть график">
                    <Button.Content>
                        <Grid>
                            <PathIcon Data="{StaticResource eye_show_regular}" IsVisible="{CompiledBinding SelectedTab.Plot.IsVisible}" />
                            <PathIcon Data="{StaticResource eye_hide_regular}" IsVisible="{CompiledBinding !SelectedTab.Plot.IsVisible}" />
                        </Grid>
                    </Button.Content>
                </Button>
                <ColorPicker
                    Width="70"
                    Height="32"
                    Margin="5"
                    Color="{Binding SelectedTab.Plot.ColorHex, Mode=TwoWay, Converter={StaticResource HexToColorConverter}}" />

            </StackPanel>
            <TabControl
                Grid.Row="1"
                IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}"
                ItemsSource="{CompiledBinding Tabs}"
                SelectedIndex="{CompiledBinding SelectedTabIndex}">
                <TabControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBox
                                MinWidth="100"
                                IsVisible="{CompiledBinding IsEditingHeader}"
                                KeyDown="HeaderEdit_KeyDown"
                                LostFocus="HeaderEdit_LostFocus"
                                Text="{CompiledBinding Header,
                                                       Mode=TwoWay}" />
                            <TextBlock
                                MinWidth="100"
                                DoubleTapped="Header_DoubleTapped"
                                IsVisible="{CompiledBinding !IsEditingHeader}}"
                                Text="{CompiledBinding Header}" />
                        </StackPanel>
                    </DataTemplate>
                </TabControl.ItemTemplate>

                <TabControl.ContentTemplate>
                    <DataTemplate DataType="{x:Type vm:TabViewModel}">
                        <treegrid:TreeDataGrid
                            MinHeight="100"
                            Margin="0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Top"
                            Source="{Binding AntennaSource}" />
                    </DataTemplate>
                </TabControl.ContentTemplate>
            </TabControl>

            <Grid
                Grid.Row="2"
                Margin="0,8,0,0"
                ShowGridLines="False">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="55" />
                    <ColumnDefinition Width="130" />
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Размер сектора  -->
                <TextBlock
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="0,0,4,0"
                    VerticalAlignment="Center"
                    Text="Размер:" />
                <NumericUpDown
                    Name="NumericUpDownSectorSize"
                    Grid.Row="0"
                    Grid.Column="1"
                    Width="115"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Increment="5"
                    IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}"
                    LostFocus="NumericUpDown_LostFocus"
                    Maximum="360"
                    Minimum="10"
                    Watermark="Размер сектора"
                    Value="{CompiledBinding SectorSize,
                                            Mode=TwoWay}" />

                <!--  Центр сектора  -->
                <TextBlock
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="0,0,4,0"
                    VerticalAlignment="Center"
                    Text="Центр:" />
                <NumericUpDown
                    Name="NumericUpDownSectorCenter"
                    Grid.Row="1"
                    Grid.Column="1"
                    Width="115"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Increment="5"
                    IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}"
                    KeyDown="NumericUpDown_KeyDown"
                    LostFocus="NumericUpDown_LostFocus"
                    Maximum="360"
                    Minimum="-1"
                    Watermark="Центр сектора"
                    Value="{CompiledBinding SectorCenter,
                                            Mode=TwoWay}" />

                <StackPanel
                    Grid.Row="0"
                    Grid.RowSpan="2"
                    Grid.Column="2"
                    Margin="8,4,0,0"
                    VerticalAlignment="Center"
                    Orientation="Vertical">
                    <Button
                        Width="60"
                        Height="28"
                        Margin="0,0,0,6"
                        Command="{CompiledBinding Set120DegreesCommand}"
                        Content="120°"
                        IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}" />
                    <Button
                        Width="60"
                        Height="28"
                        Margin="0,0,0,6"
                        Command="{CompiledBinding Set180DegreesCommand}"
                        Content="180°"
                        IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}" />
                    <Button
                        Width="60"
                        Height="28"
                        Margin="0,0,0,6"
                        Command="{CompiledBinding Set360DegreesCommand}"
                        Content="360°"
                        IsEnabled="{CompiledBinding !IsDiagramAcquisitionRunning}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="0"
                    Grid.RowSpan="2"
                    Grid.Column="3"
                    Margin="0,8,0,0"
                    VerticalAlignment="Top"
                    Orientation="Vertical">
                    <CheckBox
                        MinWidth="130"
                        Margin="0,0,8,0"
                        Content="отображать антенну"
                        IsChecked="{CompiledBinding ShowAntenna,
                                                    Mode=TwoWay}" />
                    <CheckBox
                        MinWidth="130"
                        Content="отображать сектор"
                        IsChecked="{CompiledBinding ShowSector,
                                                    Mode=TwoWay}" />
                </StackPanel>



                <!--  Кнопки построения и прерывания диаграммы  -->
                <Button
                    x:Name="StartButton"
                    Grid.Row="2"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Height="32"
                    Margin="0,8,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    Command="{CompiledBinding StartDiagramAcquisitionCommand}"
                    Content="Начать построение диаграммы"
                    IsEnabled="{CompiledBinding IsPortOpen}"
                    IsVisible="{CompiledBinding !IsDiagramAcquisitionRunning}">
                    <Button.Styles>
                        <Style>
                            <Style.Resources>
                                <SolidColorBrush x:Key="ThemeBorderMidBrush">LimeGreen</SolidColorBrush>
                                <SolidColorBrush x:Key="ThemeControlHighBrush">LightGreen</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBorderBrush">LimeGreen</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackground">LimeGreen</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver">Lime</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackgroundPressed">LightGreen</SolidColorBrush>
                            </Style.Resources>
                        </Style>
                    </Button.Styles>
                </Button>
                <Button
                    x:Name="StopButton"
                    Grid.Row="2"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Height="32"
                    Margin="0,8,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    Command="{CompiledBinding CancelDiagramAcquisitionCommand}"
                    Content="              Прервать             "
                    IsEnabled="{CompiledBinding IsPortOpen}"
                    IsVisible="{CompiledBinding IsDiagramAcquisitionRunning}">
                    <Button.Styles>
                        <Style>
                            <Style.Resources>
                                <SolidColorBrush x:Key="ThemeBorderMidBrush">Red</SolidColorBrush>
                                <SolidColorBrush x:Key="ThemeControlHighBrush">DarkRed</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBorderBrush">Red</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackground">OrangeRed</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver">Red</SolidColorBrush>
                                <SolidColorBrush x:Key="ButtonBackgroundPressed">OrangeRed</SolidColorBrush>
                            </Style.Resources>
                        </Style>
                    </Button.Styles>
                </Button>

            </Grid>

        </Grid>

        <TextBlock
            Grid.Row="2"
            Grid.Column="3"
            Margin="5"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            FontSize="14"
            Text="{CompiledBinding LastEvent}" />
        <StackPanel Grid.Column="2">
            <Button
                Margin="10"
                HorizontalAlignment="Right"
                Click="OnSettingsClick"
                Content="Настройки">
                <PathIcon Data="{StaticResource settings_regular}" />
            </Button>

            <Border
                x:Name="SettingsOverlay"
                Width="300"
                Margin="5"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Background="{DynamicResource SystemChromeMediumColor}"
                BorderBrush="{DynamicResource SystemBaseLowColor}"
                BorderThickness="1"
                CornerRadius="8"
                IsVisible="False"
                ZIndex="100">

                <StackPanel>
                    <TextBlock
                        Margin="10"
                        FontWeight="Bold"
                        Text="Настройки" />
                    <ToggleSwitch
                        Grid.Row="2"
                        Grid.Column="3"
                        Margin="0,0,10,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Content="Тёмная тема"
                        IsChecked="{CompiledBinding IsDarkTheme,
                                                    Mode=TwoWay}" />
                    <CheckBox
                        Margin="10"
                        Content="Показывать легенду"
                        IsChecked="{CompiledBinding ShowLegend,
                                                    Mode=TwoWay}" />
                    <CheckBox
                        Margin="10"
                        Content="Показывать маркеры"
                        IsChecked="{CompiledBinding ShowMarkers,
                                                    Mode=TwoWay}" />                    
                    <ComboBox Margin="0,0,0,8">
                        <ComboBoxItem Content="Вариант 1" />
                        <ComboBoxItem Content="Вариант 2" />
                        <ComboBoxItem Content="Вариант 3" />
                    </ComboBox>
                    <Button
                        HorizontalAlignment="Right"
                        Click="OnSettingsClick"
                        Content="Скрыть" />
                </StackPanel>
            </Border>
        </StackPanel>

    </Grid>

</Window>
